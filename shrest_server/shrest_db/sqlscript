/*In the Add New User page, enter the following details:
First Name & Last Name - It is mandatory to enter the Last Name.
Email - Enter the user's valid email address that is not already used to create a Zoho CRM account.
An invitation will be sent to this email address.
Role- Choose the role of the user in your organization.
Profile - Choose a profile that defines the access rights in CRM account for the user.
You can add other details like phone numbers, address, photo, fax, website, date of birth, language, etc. after adding the user.
user must be employee, if not, give it a dumy id like customer department, verdor part etc

*/
CREATE TABLE 'user'(
	'login_name' varchar(32) PRIMARY KEY,
	'pass_word' char(32),
	'employee_id'	INT,
	'role'	char(10) DEFAULT "normal",
	'profile' char(20) DEFAULT "view",
	'creator_id' INT,
	'when' DATE NOT NULL,
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	FOREIGN KEY(employee_id) REFERENCES employee(employee_id),
	CHECK (role IN ("normal", "administor")),
	CHECK (profile IN ("view", "change"))
);

CREATE TABLE 'company'(
	'company_id' INTEGER PRIMARY KEY,
	'name'	varchar(100), 
	'address'	varchar(100), 
	'phone'	varchar(20), 
	'fax'	varchar(20),
	'parent_company' INT,
	'industry_type'	INT, 
	'who_referred' INT, 
	'annual_revenue' float, 
	'currency_id' char(3),
	'credit_limit'	float, 
	'credit_rating'	INT, 
	'time_zone'	INT, 
	'payment_terms'	INT);

CREATE TABLE employee(
	'employee_id' INTEGER PRIMARY KEY,
	'firstName' char(20), 
	'lastName' char(20), 
	'age' int, 
	'address' varchar(100),
	'mobile_phone' char(20), 
	'office_phone' char(20),  
	'home_phone' char(20), 
	'email' varchar(32),
	'job_title' int,
	'department_id' int,
	'reports_to' int,
	'create_date' DATE,
	'created_by' int,
	FOREIGN KEY(job_title) REFERENCES employee_title(title_id),
	FOREIGN KEY(department_id) REFERENCES employee_title(department_id),
	FOREIGN KEY(created_by) REFERENCES employee(employee_id)
);

CREATE TABLE employee_title(
	'title_id' INT PRIMARY KEY,
	'name' char(20) NOT NULL, 
	'description' char(20) NOT NULL
);

INSERT INTO 'employee_title'( title_id, name, description ) VALUES
(1, "regular", "without stuff management reponsibilities"),
(2, "manager", "manages other people");


CREATE TABLE employee_department(
	'department_id' INT PRIMARY KEY,
	'name' char(20), 
	'description' char(20)
);

INSERT INTO 'employee_department'( department_id, name, description ) VALUES
(1, "sales", "selling prodcts"),
(2, "marketing", "markegint products"),
(3, "development", "development products");

CREATE TABLE contact(
	'contact_id' INTEGER PRIMARY KEY,
	'status' int DEFAULT 1,
	'firstName' char(20), 
	'lastName' char(20), 
	'age' int, 
	'address' varchar(100),
	'mobile_phone' char(20), 
	'office_phone' char(20),  
	'home_phone' char(20), 
	'fax' char(20),
	'email' varchar(32),
	'job_title' varchar(32),
	'company_id' int ,
	'when_met' Date NOT NULL,
	'where_met' varchar(100),
	'birthday' Data,
	'married' BOOL,
	'children' int,
	'time_zone' char(3),
	'extra_info' varchar(100),
	FOREIGN KEY(status) REFERENCES contact_status(status),
	FOREIGN KEY(company_id) REFERENCES company(company_id)
);

CREATE TABLE contact(
	'contact_id' INTEGER PRIMARY KEY,
	'status' varchar(20),
	'firstName' char(20), 
	'lastName' char(20), 
	'age' int, 
	'address' varchar(100),
	'mobile_phone' char(20), 
	'office_phone' char(20),  
	'home_phone' char(20), 
	'fax' char(20),
	'email' varchar(32),
	'job_title' varchar(32),
	'company_id' int,
	'when_met' Date,
	'where_met' varchar(100),
	'birthday' Data,
	'married' BOOL,
	'children' int,
	'time_zone' char(3),
	'extra_info' varchar(100),
	CHECK ( status IN ("Not Attempted", "Attempted", "Contacted", "New Opportunity", "Additional Contact", "Disqualified"))
);


#activities 
CREATE TABLE activity_code(
	'activity_id' INT PRIMARY KEY,
	'description' nvarchar(100)
);
INSERT INTO 'activity_code'(activity_id, description) VAlUES
	(1, "email"),
	(2, "phone call"),
	(3, "fax"),
	(4, "in person"),	
	(5, "contact_buy"),
	(6, "contact_sell"),
	(7, "support_contact");

CREATE TABLE activity(
	'event_id'  INTEGER  PRIMARY KEY,
	'contact_type'  INT,
	'contact_id' INT,
	'who_contacts' INT,
	'when_created' Date NOT NULL,
	'note'	varchar(100),
	FOREIGN KEY (contact_type)REFERENCES activity_code(activity_id),
	FOREIGN KEY (contact_id) REFERENCES contact(contact_id),
	FOREIGN KEY (who_contacts)REFERENCES employee(employee_id)

);

/*lead management status*/
CREATE TABLE contact_status(
	'status' int PRIMARY KEY,
	'description' varchar(20),
	'detail'  varchar(100)
};

INSERT INTO 'contact_status'(status, description, detail)
	 VALUES(1, "Not Attempted", "you haven’t tried to reach the lead"),
	 (2, "Attempted", "you have tried (person-to-person) to reach the lead"),
	 (3, "Contacted", "you have had a person-to-person dialog with the lead"),
	 (4, "New Opportunity", "new opportunity identified (convert lead)"),
	 (5, "Additional Contact", "new contact at existing opportunity (convert lead)"),
	 (6, "Disqualified", "never going to be a prospect for your product or service because this lead is the incorrect industry, company, contact or data");

CREATE TABLE task( 
	'task_id' INTEGER PRIMARY KEY,
	'task_name' varchar(60), 
	'due_date' Date NOT NULL,
	'description' varchar(200), 
	'status' varchar(20),
	'assignee' int, 
	'assigner' int, 
	'creator' int,
	CHECK( description IN ("Not Assigned", "Assigned", "Finished", "Revoked"))
);

CREATE TABLE task_status( 
	'status_id' int PRIMARY KEY,
	'description' varchar(20)
);

INSERT INTO 'task_status'(status_id, description) 
	VALUES( 1, "Not Assigned"),(2, "Assigned"), (3, "Finished"), (4, "Revoked");

CREATE TABLE 'product'( 
	'product_id' INTEGER PRIMARY KEY,
	'name' varchar(32),
	'price' decimal(6,2),
	'limit' int,
	'product_id' int,
	'active_for_sale' bool
);

CREATE TABLE 'order'( 
	'order_id' INTEGER PRIMARY KEY,
	'customer_id' int,
	'product_id' int,
	'order_amount' decimal(8,2),
	'date' date NOT NULL,
	'order_status' int
);

CREATE TABLE 'cookie'( 
	'session_id' char(36) PRIMARY KEY,
	'user_name' varchar(20),
	'password' varchar(32)
);

CREATE TABLE 'opportunity_pipeline'(
	'pipeline_id' INT PRIMARY KEY,
	'name'  varchar(20),
	'description' varchar(100));

INSERT INTO 'opportunity_pipeline'(pipeline_id, name, description) VALUES
(1, "Prospecting", "The first step in locating new opportunities, prospecting means \“testing the waters\” with a potential customer and measuring a level of interest."),
(2, "Qualification", " This involves evaluating the lead or customer based on a variety of criteria, including how interested they are, how likely they are to purchase, and how long the process might take."),
(3, "Needs Analysis", " Analyzing needs means determining what the need is in a target company and deciding whether or not your company can fulfill those needs using your product or service."),
(4, "Value Proposition", " This step involves understanding the relationship between the value of your product or service and the value it represents to a potential or current customer."),
(5, "Identify Decision Makers", " Identifying decision makers means determining who at a company is the person with the power to make purchasing decisions, and beginning to develop a relationship with them."),
(6, "Perception Analysis", " This stage involves determining how a customer perceives the services or products you offer; what they expect from your company and the product or service you offer."),
(7, "Proposal / Price Quote", " This happens later on in the pipeline - quoting a price and creating a proposal happens once the lead is interested enough to pursue this potential, but may want to confirm pricing and compare quotes with other companies."),
(8, "Negotiation / Review", " This stage happens towards the end of a pipeline; by the negotiation and review stage you should be hammering out the final details of the deal."),
(9, "Closed" , "either Closed Won or Closed Lost");

CREATE TABLE 'opportunity'(
	'opportunity' INTEGER PRIMARY KEY,
	'opportunity_name' varchar(50),
	'assign_to'  INT,
	'contact_id' INT,
	'creator_id' INT,
	'close_date' DATE,
	'pipeline' varchar(20),
	'amount' decimal(8,2),
	'probability' INT,
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(contact_id) REFERENCES contact(contact_id),
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	FOREIGN KEY(pipeline) REFERENCES opportunity_pipeline(pipeline_id),
	CHECK (pipeline IN ("Prospecting","Qualification", "Needs Analysis","Value Proposition","Identify Decision Makers","Perception Analysis","Proposal / Price Quote","Negotiation / Review", "Closed"))
 );

CREATE TABLE 'compaign_status'(
	'status_id' INTEGER,
	'status_name' varchar(20),
	'description'  varchar(50)
);
	
CREATE TABLE 'compaign'(
	'compaign_id' INTEGER PRIMARY KEY,
	'compaign_name' varchar(50),
	'assign_to'  INT,
	'status' varchar(20),
	'creator_id' INT,
	'start_date' DATE,
	'close_date' DATE,
	'description' varchar(100),
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	CHECK (status IN ("XXX", "YYY" ))
);
	
CREATE TABLE 'case'(
	'case_id' INTEGER PRIMARY KEY,
	'assign_to' INT,
	'contactee' INT,
	'subject' varchar(100),
	'priority' char(10),
	'last_activity' DATE,
	'next_activity' DATE,
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(contactee) REFERENCES contact(contact_id),
 	CHECK( priority IN ("low", "medium", "high"))
);
/*
Case #: This number is automatically generated in an ascending order each time you create a case in Method. You can search and order the grid using these numbers.
Created date: The date a case was created.
Assigned to/Origin/Status: This three-part grid header will identify which Method user a case was assigned to, where the case originated, and the status of the case (see New case for more details on all of this).
Contact/Name/Company: This section will list the contact, name, and company associated with this case based in the information that was provided in the case information.
Subject: This will detail the subject line that was filled in when the case was created.
Priority: Priorities, much like in activities, can be set to three levels out-of-the-box in Method: low, medium, and high.
Internal comments: This will display any pertinent comments you have included regarding this case.
Last activity: This will identify the date the last activity was due to for this case.
Next activity: This will identify the date the next activity is due for this case.
*/

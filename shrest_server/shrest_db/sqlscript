/*In the Add New User page, enter the following details:
First Name & Last Name - It is mandatory to enter the Last Name.
Email - Enter the user's valid email address that is not already used to create a Zoho CRM account.
An invitation will be sent to this email address.
Role- Choose the role of the user in your organization.
Profile - Choose a profile that defines the access rights in CRM account for the user.
You can add other details like phone numbers, address, photo, fax, website, date of birth, language, etc. after adding the user.
user must be employee, if not, give it a dumy id like customer department, verdor part etc

*/
CREATE TABLE 'crm_user'(
	'login_name' varchar(32) PRIMARY KEY,
	'pass_word' char(32),
	'employee_id'	char(36),
	'role_name'	char(10),
	'profile_name' char(10),
	'creator_id' char(36),
	'create_date' DATE NOT NULL,
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	FOREIGN KEY(employee_id) REFERENCES employee(employee_id)
);
INSERT INTO 'crm_user'(login_name, pass_word, employee_id, role_name, profile_name, creator_id, create_date) 
	VALUES("root", "magic", "xxxx", "xxxx1", "xxxx2", "ksjdkfj", "2016/11/21");

CREATE TABLE employee_role(
	'role_name' char(20) PRIMARY KEY,
	'description' char(20)
);
INSERT INTO 'employee_role'(role_ame, description) 
	VALUES("CEO", "Manages the whole company");
	

CREATE TABLE employee_profile(
	'profile_name' char(20) PRIMARY KEY,
	'description' char(20)
);
INSERT INTO 'employee_profile'(profile_name, description) 
	VALUES( "database manager", "Manages database daily maintainence");


CREATE TABLE 'company'(
	'company_id' char(36) PRIMARY KEY,
	'name'	varchar(100), 
	'address'	varchar(100), 
	'phone'	varchar(20), 
	'fax'	varchar(20),
	'parent_company' INT,
	'industry_type'	INT, 
	'annual_revenue' float, 
	'currency_id' char(3),
	'credit_limit'	float, 
	'credit_rating'	char(6), 
	'time_zone'	char(3), 
	'payment_terms'	INT);

CREATE TABLE employee(
	'employee_id' char(36) PRIMARY KEY,
	'first_name' char(20), 
	'last_name' char(20), 
	'age' int, 
	'address' varchar(100),
	'mobile_phone' char(20), 
	'office_phone' char(20),  
	'home_phone' char(20), 
	'email' varchar(32),
	'job_title' char(20),
	'department_name' char(20),
	'reports_to' char(36),
	'create_date' DATE,
	'created_by' char(36),
	FOREIGN KEY(job_title) REFERENCES employee_title(title_name),
	FOREIGN KEY(department_name) REFERENCES employee_department(department_name),
	FOREIGN KEY(created_by) REFERENCES employee(employee_id)
);

CREATE TABLE employee_title(
	'title_name' char(20) PRIMARY KEY,
	'description' char(20) NOT NULL
);

INSERT INTO 'employee_title'( title_name, description ) VALUES
( "regular", "without stuff management reponsibilities"),
( "manager", "manages other people");


CREATE TABLE employee_department(
	'department_name' char(20) PRIMARY KEY,
	'description' char(20)
);

INSERT INTO 'employee_department'( department_name, description ) VALUES
( "sales", "selling prodcts"),
( "marketing", "markegint products"),
( "development", "development products");
/*

First Name/Last Name are the first and last names of the contact
Name is the contact's full name, pulled from the first and last name fields
Title refers to the contact's title within the company (e.g. CEO or Accountant)
Phone is usually the contact's primary phone number
Alt phone should be a reliable alternative phone number for the contact
Mobile refers to the contact's cell phone
Pager refers to the contact's pager number, should they have one
Email is the contact's primary email address
Twitter user name can refer to the company Twitter account or the individual contact's account if appropriate (displayed as @username)

Facebook user name can refer to the company Facebook page or the individual contact's profile if appropriate (displayed as facebook.com/username)

LinkedIn public user name can refer to the company's LinkedIn profile or the individual contact's profile if appropriate

Website address usually refers to the website of the contact's company

Notes allows you to take down any pertinent notes about this contact – what you put in that field is up to you!
Contact type refers to whether this is:
the main customer contact (the one associated with a QuickBooks file),

an alternate contact (one associated only with Method), or

a QB contact (one associated with QuickBooks). 
If the contact type field is blank, that means the contact is only associated with Method and can be deleted by using theDelete contact option under More action.


*/

CREATE TABLE customer(
	customer_id  INTEGER PRIMARY KEY,
	company_name varchar(100) NOT NULL,
	contact_name varchar(100),
	personal_title char(5),
	first_name char(10),
	last_name char(10),
	phone char(16),
	email char(20),
	street_addr varchar(20),
	city char(20),
	state char(20),
	post_code char(10),
	country char(20),
	bill_addr varchar(50),
	ship_addr varchar(50)
);


CREATE TABLE lead_status(
	'status' int PRIMARY KEY,
	'description' varchar(20),
	'detail'  varchar(100)
);

INSERT INTO 'lead_status'(status, description)
	VALUES( 1, "qualified"), (2, "unqualified"), (3, "closed");

CREATE TABLE lead_source(
	'source' int PRIMARY KEY,
	'description' varchar(20),
	'detail'  varchar(100)
);

INSERT INTO 'lead_source'( source, description )
	VALUES( 1, "web site"),(2, "marketing"),
	(3, "Advertisement"),
	(4, "Employee Referral"),
	(5, "Other"),
	(6, "Partner"),
	(7, "Public Relations"),
	(8, "Seminar-internal"),
	(9, "Seminar-Partner"),
	(10, "Trade Show"),
	(11, "Word of mouth");


CREATE TABLE lead_rating(
	'rating' int PRIMARY KEY,
	'description' varchar(20),
	'detail'  varchar(100)
);

INSERT INTO 'lead_rating'( rating, description )
	VALUES( 1, "high"),(2, "medium");

CREATE TABLE lead(
	lead_id  INTEGER PRIMARY KEY,
	company_name varchar(100) NOT NULL,
	contact_name varchar(100),
	personal_title char(5),
	first_name char(10),
	last_name char(10),
	phone char(16),
	email char(20),
	street_addr varchar(20),
	city char(20),
	state char(20),
	post_code char(10),
	country char(20),
	bill_addr varchar(50),
	ship_addr varchar(50),
	lead_source int, /*meeting, campaign, etc*/
	lead_status int, /*open, unqualified, qualified*/
	lead_rating int /*cold, warm, hot*/
);

/*
Contact type refers to whether this is:
the main customer contact (the one associated),
an alternate contact

Opt out of marketing means the contact will be flagged to not receive marketing mail, emails, or phone calls
Opt out of billing means the contact will be flagged to not receive billing mail, emails, or phone calls
*/

CREATE TABLE 'contact_from'(
	'contact_from' INT PRIMARY KEY,
	'description' varchar(20)
);

INSERT INTO 'contact_from'(contact_from, description)
VALUES(1, "Lead"), (2, "Customer"), (3, "Vendor"), (4, "Employee"), (5, "Other");

CREATE TABLE 'contact'(
	'contact_id' INTEGER PRIMARY KEY,
	'status' int DEFAULT 1,
	'firstName' char(20), 
	'lastName' char(20), 
	'contact_from' int,
	'address' varchar(100),
	'primary_phone' char(20), 
	'alt_phone' char(20),  
	'mobile_phone' char(20), 
	'fax' char(20),
	'email' varchar(32),
	'twitter' varchar(32),
	'linkedin' varchar(32),
	'facebook' varchar(32),
	'job_title' varchar(32),
	'company_id' int ,
	'when_met' Date NOT NULL,
	'where_met' varchar(100),
	'time_zone' char(3),
	'main_contact' int,
	'out_of_marketing' int,
	'out_of_billing' bool,
	'extra_info' varchar(200),
	FOREIGN KEY(status) REFERENCES contact_status(status),
	FOREIGN KEY(company_id) REFERENCES company(company_id)
);



#activities 
/*metting, to-do, Phone call incoming*/
CREATE TABLE activity_type(
	'activity_type' INT PRIMARY KEY,
	'description' nvarchar(50)
);
INSERT INTO 'activity_type'(activity_type, description) VAlUES
	(1, "Email Incoming"),
	(2, "Email Incoming & Outgoing"),
	(3, "Email Outgoing"),
	(4, "Meeting"),	
	(5, "Phone Callin"),
	(6, "{Phone Callout"),
	(7, "Other");

CREATE TABLE activity_status(
	'activity_status' INT PRIMARY KEY,
	'description' nvarchar(50)
);

INSERT INTO 'activity_status'(activity_status, description) VAlUES
	(1, "Not Started"),
	(2, "Cancelled"),
	(3, "Completed"),
	(4, "In Progress"),	
	(5, "Deferred"),
	(6, "Waiting on someone else");

CREATE TABLE 'activity_priority'(
	'activity_priority' INT PRIMARY KEY,
	'description' varchar(50)
);

INSERT INTO 'activity_priority'(activity_priority, description) VAlUES
	(1, "High"),
	(2, "Medium"),
	(3, "Low");

CREATE TABLE activity(
	'activity_id'  INTEGER  PRIMARY KEY,
	'activity_name' varchar(30),
	'activity_type'  INT, 
	'activity_status' INT, /**/
	'activity_priority' INT,	
	'who_preside' INT,
	'when_created' Date NOT NULL,
	'note'	varchar(100),
	FOREIGN KEY (activity_type)REFERENCES activity_type(activity_type),
	FOREIGN KEY (activity_status) REFERENCES activity_status(activity_status),
	FOREIGN KEY (activity_priority) REFERENCES activity_priority(activity_priority),
	FOREIGN KEY (who_preside)REFERENCES employee(employee_id)
);



/*lead management status*/
CREATE TABLE contact_status(
	'status' int PRIMARY KEY,
	'description' varchar(20),
	'detail'  varchar(100)
};

INSERT INTO 'contact_status'(status, description, detail)
	 VALUES(1, "Not Attempted", "you haven’t tried to reach the lead"),
	 (2, "Attempted", "you have tried (person-to-person) to reach the lead"),
	 (3, "Contacted", "you have had a person-to-person dialog with the lead"),
	 (4, "New Opportunity", "new opportunity identified (convert lead)"),
	 (5, "Additional Contact", "new contact at existing opportunity (convert lead)"),
	 (6, "Disqualified", "never going to be a prospect for your product or service because this lead is the incorrect industry, company, contact or data");

CREATE TABLE task( 
	'task_id' INTEGER PRIMARY KEY,
	'task_name' varchar(60), 
	'due_date' Date NOT NULL,
	'description' varchar(200), 
	'status' varchar(20),
	'assignee' int, 
	'assigner' int, 
	'creator' int,
	CHECK( description IN ("Not Assigned", "Assigned", "Finished", "Revoked"))
);

CREATE TABLE task_status( 
	'status_id' int PRIMARY KEY,
	'description' varchar(20)
);

INSERT INTO 'task_status'(status_id, description) 
	VALUES( 1, "Not Assigned"),(2, "Assigned"), (3, "Finished"), (4, "Revoked");

CREATE TABLE 'product'( 
	'product_id' INTEGER PRIMARY KEY,
	'name' varchar(32),
	'price' decimal(6,2),
	'limit' int,
	'product_id' int,
	'active_for_sale' bool
);

CREATE TABLE 'order'( 
	'order_id' INTEGER PRIMARY KEY,
	'customer_id' int,
	'product_id' int,
	'order_amount' decimal(8,2),
	'date' date NOT NULL,
	'order_status' int
);

CREATE TABLE 'cookie'( 
	'session_id' char(36) PRIMARY KEY,
	'user_name' varchar(20),
	'password' varchar(32)
);

CREATE TABLE 'opportunity_pipeline'(
	'pipeline_id' INT PRIMARY KEY,
	'name'  varchar(20),
	'description' varchar(100));

INSERT INTO 'opportunity_pipeline'(pipeline_id, name, description) VALUES
(1, "Prospecting", "The first step in locating new opportunities, prospecting means \“testing the waters\” with a potential customer and measuring a level of interest."),
(2, "Qualification", " This involves evaluating the lead or customer based on a variety of criteria, including how interested they are, how likely they are to purchase, and how long the process might take."),
(3, "Needs Analysis", " Analyzing needs means determining what the need is in a target company and deciding whether or not your company can fulfill those needs using your product or service."),
(4, "Value Proposition", " This step involves understanding the relationship between the value of your product or service and the value it represents to a potential or current customer."),
(5, "Identify Decision Makers", " Identifying decision makers means determining who at a company is the person with the power to make purchasing decisions, and beginning to develop a relationship with them."),
(6, "Perception Analysis", " This stage involves determining how a customer perceives the services or products you offer; what they expect from your company and the product or service you offer."),
(7, "Proposal / Price Quote", " This happens later on in the pipeline - quoting a price and creating a proposal happens once the lead is interested enough to pursue this potential, but may want to confirm pricing and compare quotes with other companies."),
(8, "Negotiation / Review", " This stage happens towards the end of a pipeline; by the negotiation and review stage you should be hammering out the final details of the deal."),
(9, "Closed" , "either Closed Won or Closed Lost");

CREATE TABLE 'opportunity'(
	'opportunity' INTEGER PRIMARY KEY,
	'opportunity_name' varchar(50),
	'assign_to'  INT,
	'contact_id' INT,
	'creator_id' INT,
	'close_date' DATE,
	'pipeline' int,
	'amount' decimal(8,2),
	'probability' INT,
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(contact_id) REFERENCES contact(contact_id),
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	FOREIGN KEY(pipeline) REFERENCES opportunity_pipeline(pipeline_id)
 );


CREATE TABLE 'campaign_status'(
	'status_id' INTEGER,
	'status_name' varchar(20),
	'description'  varchar(50)
);

INSERT INTO 'campaign_status'(status_id, status_name, description) VALUES
	(0, "Proposed", "Active"),
	(1, "Ready", "Active"),
	(2, "Launched", "Active"),
	(3, "Completed", "Active"),
	(4, "Canceled", "Active"),
	(5, "Suspended", "Active"),
	(6, "Inactive", "Inactive");
	
CREATE TABLE 'campaign'(
	'campaign_id' INTEGER PRIMARY KEY,
	'campaign_name' varchar(50),
	'assign_to'  INT,
	'status' int,
	'creator_id' INT,
	'start_date' DATE,
	'close_date' DATE,
	'description' varchar(100),
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id)
);
	

CREATE TABLE 'case_status'(
	'status' INT PRIMARY KEY,
	'description' varchar(20)
);

CREATE TABLE 'case_priority'(
	'priority' INT PRIMARY KEY,
	'description' varchar(20)
);

CREATE TABLE 'case_type'(
	'type' INT PRIMARY KEY,
	'description' varchar(20)
);

CREATE TABLE 'case_reason'(
	'reason' INT PRIMARY KEY,
	'description' varchar(20)
);

CREATE TABLE 'case_tbl'(
	'case_id' INTEGER PRIMARY KEY,
	'assign_to' INT,
	'contact' INT,
	'subject' varchar(100),
	'priority' int,
	'status' int,
	'type' int,
	'reason' int,
	'last_activity' DATE,
	'next_activity' DATE,
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(contact) REFERENCES contact(contact_id)
);
/*
Case #: This number is automatically generated in an ascending order each time you create a case in Method. You can search and order the grid using these numbers.
Created date: The date a case was created.
Assigned to/Origin/Status: This three-part grid header will identify which Method user a case was assigned to, where the case originated, and the status of the case (see New case for more details on all of this).
Contact/Name/Company: This section will list the contact, name, and company associated with this case based in the information that was provided in the case information.
Subject: This will detail the subject line that was filled in when the case was created.
Priority: Priorities, much like in activities, can be set to three levels out-of-the-box in Method: low, medium, and high.
Internal comments: This will display any pertinent comments you have included regarding this case.
Last activity: This will identify the date the last activity was due to for this case.
Next activity: This will identify the date the next activity is due for this case.
*/

CREATE TABLE 'vendor'(
'vendor_id' INTEGER PRIMARY KEY,
'account_num' varchar(20),
'contact' int,
'company_name' varchar(20),
'credit_rating' int,
'vendor_status' int, 
'active_flag' int,
'web_service_url' varchar(20),
'last_update' date,
FOREIGN KEY(credit_rating) REFERENCES vendor_rate(rate)
);

CREATE TABLE 'vendor_rate'(
rate int PRIMARY KEY,
description varchar(20)
);

INSERT INTO 'vendor_rate'(rate, description) VALUES
(1, "Superior"),
(2, "Excellent"),
(3, "Above average"),
(4, "Average"),
(5, "Below average")

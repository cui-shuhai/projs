/*In the Add New User page, enter the following details:
First Name & Last Name - It is mandatory to enter the Last Name.
Email - Enter the user's valid email address that is not already used to create a Zoho CRM account.
An invitation will be sent to this email address.
Role- Choose the role of the user in your organization.
Profile - Choose a profile that defines the access rights in CRM account for the user.
You can add other details like phone numbers, address, photo, fax, website, date of birth, language, etc. after adding the user.
user must be employee, if not, give it a dumy id like customer department, verdor part etc

*/
CREATE TABLE 'user'(
	'login_name' varchar(32) PRIMARY KEY,
	'pass_word' char(32),
	'employee_id'	INT,
	'role_id'	int,
	'profile_id' int,
	'creator_id' INT,
	'create_date' DATE NOT NULL,
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	FOREIGN KEY(employee_id) REFERENCES employee(employee_id)
);
INSERT INTO 'user'(login_name, pass_word, employee_id, role_id, profile_id, creator_id, create_date) 
	VALUES("root", "magic", 0, 0, 0, 0, "2016/11/21");

CREATE TABLE employee_role(
	'role_id' INT PRIMARY KEY,
	'name' char(20), 
	'description' char(20)
);
INSERT INTO 'employee_role'(role_id, name, description) 
	VALUES(0, "CEO", "Manages the whole company");
	

CREATE TABLE employee_profile(
	'profile_id' INT PRIMARY KEY,
	'name' char(20), 
	'description' char(20)
);
INSERT INTO 'employee_profile'(profile_id, name, description) 
	VALUES(0, "database manager", "Manages database daily maintainence");


CREATE TABLE 'company'(
	'company_id' INTEGER PRIMARY KEY,
	'name'	varchar(100), 
	'address'	varchar(100), 
	'phone'	varchar(20), 
	'fax'	varchar(20),
	'parent_company' INT,
	'industry_type'	INT, 
	'who_referred' INT, 
	'annual_revenue' float, 
	'currency_id' char(3),
	'credit_limit'	float, 
	'credit_rating'	INT, 
	'time_zone'	INT, 
	'payment_terms'	INT);

CREATE TABLE employee(
	'employee_id' INTEGER PRIMARY KEY,
	'firstName' char(20), 
	'lastName' char(20), 
	'age' int, 
	'address' varchar(100),
	'mobile_phone' char(20), 
	'office_phone' char(20),  
	'home_phone' char(20), 
	'email' varchar(32),
	'job_title' int,
	'department_id' int,
	'reports_to' int,
	'create_date' DATE,
	'created_by' int,
	FOREIGN KEY(job_title) REFERENCES employee_title(title_id),
	FOREIGN KEY(department_id) REFERENCES employee_title(department_id),
	FOREIGN KEY(created_by) REFERENCES employee(employee_id)
);

CREATE TABLE employee_title(
	'title_id' INT PRIMARY KEY,
	'name' char(20) NOT NULL, 
	'description' char(20) NOT NULL
);

INSERT INTO 'employee_title'( title_id, name, description ) VALUES
(1, "regular", "without stuff management reponsibilities"),
(2, "manager", "manages other people");


CREATE TABLE employee_department(
	'department_id' INT PRIMARY KEY,
	'name' char(20), 
	'description' char(20)
);

INSERT INTO 'employee_department'( department_id, name, description ) VALUES
(1, "sales", "selling prodcts"),
(2, "marketing", "markegint products"),
(3, "development", "development products");
/*

First Name/Last Name are the first and last names of the contact
Name is the contact's full name, pulled from the first and last name fields
Title refers to the contact's title within the company (e.g. CEO or Accountant)
Phone is usually the contact's primary phone number
Alt phone should be a reliable alternative phone number for the contact
Mobile refers to the contact's cell phone
Pager refers to the contact's pager number, should they have one
Email is the contact's primary email address
Twitter user name can refer to the company Twitter account or the individual contact's account if appropriate (displayed as @username)

Facebook user name can refer to the company Facebook page or the individual contact's profile if appropriate (displayed as facebook.com/username)

LinkedIn public user name can refer to the company's LinkedIn profile or the individual contact's profile if appropriate

Website address usually refers to the website of the contact's company

Notes allows you to take down any pertinent notes about this contact – what you put in that field is up to you!
Contact type refers to whether this is:
the main customer contact (the one associated with a QuickBooks file),

an alternate contact (one associated only with Method), or

a QB contact (one associated with QuickBooks). 
If the contact type field is blank, that means the contact is only associated with Method and can be deleted by using theDelete contact option under More action.


*/

CREATE TABLE customer(
	customer_id  INTEGER PRIMARY KEY,
	company_name varchar(100) NOT NULL,
	contact_name varchar(100),
	personal_title char(5),
	first_name char(10),
	last_name char(10),
	phone char(16),
	email char(20),
	street_addr varchar(20),
	city char(20),
	state char(20),
	post_code char(10),
	country char(20),
	bill_addr varchar(50),
	ship_addr varchar(50)
);



CREATE TABLE lead(
	lead_id  INTEGER PRIMARY KEY,
	company_name varchar(100) NOT NULL,
	contact_name varchar(100),
	personal_title char(5),
	first_name char(10),
	last_name char(10),
	phone char(16),
	email char(20),
	street_addr varchar(20),
	city char(20),
	state char(20),
	post_code char(10),
	country char(20),
	bill_addr varchar(50),
	ship_addr varchar(50),
	lead_source int, /*meeting, compaign, etc*/
	lead_status int, /*open, unqualified, qualified*/
	lead_ratig int, /*cold, warm, hot*/
);

/*
Contact type refers to whether this is:
the main customer contact (the one associated),
an alternate contact

Opt out of marketing means the contact will be flagged to not receive marketing mail, emails, or phone calls
Opt out of billing means the contact will be flagged to not receive billing mail, emails, or phone calls
*/

CREATE TABLE contact(
	'contact_id' INTEGER PRIMARY KEY,
	'status' int DEFAULT 1,
	'firstName' char(20), 
	'lastName' char(20), 
	'age' int, 
	'address' varchar(100),
	'primary_phone' char(20), 
	'alt_phone' char(20),  
	'mobile_phone' char(20), 
	'fax' char(20),
	'email' varchar(32),
	'twitter' varchar(32),
	'linkedin' varchar(32),
	'faceboot' varchar(32),
	'job_title' varchar(32),
	'company_id' int ,
	'when_met' Date NOT NULL,
	'where_met' varchar(100),
	'birthday' Data,
	'married' BOOL,
	'children' int,
	'time_zone' char(3),
	'main_contact' int,
	'out_of_marketing' int,
	'out_of_billing' bool,
	'extra_info' varchar(200),
	FOREIGN KEY(status) REFERENCES contact_status(status),
	FOREIGN KEY(company_id) REFERENCES company(company_id)
);


#activities 
CREATE TABLE activity_code(
	'activity_id' INT PRIMARY KEY,
	'description' nvarchar(100)
);
INSERT INTO 'activity_code'(activity_id, description) VAlUES
	(1, "email"),
	(2, "phone call"),
	(3, "fax"),
	(4, "in person"),	
	(5, "contact_buy"),
	(6, "contact_sell"),
	(7, "support_contact");

CREATE TABLE activity(
	'activity_id'  INTEGER  PRIMARY KEY,
	'activity_type'  INT, /*metting, to-do, Phone call incoming*/
	'activity_status' INT, /**/
	'activity_priority' INT,	
	'contact_id' INT,
	'who_contacts' INT,
	'when_created' Date NOT NULL,
	'note'	varchar(100),
	FOREIGN KEY (contact_type)REFERENCES activity_code(activity_id),
	FOREIGN KEY (contact_id) REFERENCES contact(contact_id),
	FOREIGN KEY (who_contacts)REFERENCES employee(employee_id)
);
/*the three most common activities to be assigning tasks, logging calls, and creating appointments.
The New Appointment tab link opens the screen with the Type field automatically set to "Meeting".

The New Task tab link opens the screen with the Type field automatically set to "To-do".

The Log Call tab link opens the screen with the Type field automatically set to "Phone call incoming".
--
Email Incoming: Log when you receive an email.

Email Incoming & Outgoing: Use this type when you've received an email and immediately responded.

Email Outgoing: Log when you send an email.

Meeting: Log the duration and minutes of a meeting.

Other: We've included this option to encompass anything the rest of our preloaded options don't, but since you're free to create your own activity types, you may or may not have use for this one.

Phone Call Incoming: Log when you receive a phone call.

Phone Call Outgoing: Log when you place a call to someone else.

To-do: Unlike the other activity types, this type is used not to log a task, but when you want to remind yourself (or another user) to complete a task.

Web Comment: When comments are introduced to your cases through a customer portal, or are introduced via a web-to-lead submission, they are called "Web Comments". Log when you receive a web comment.
---
Activity statuses

When you are choosing your activity status, it is helpful to know what the pre-loaded status types refer to. Let's take a look at them here.

Not Started: An activity that is active but has not yet been started. This could be because it's planned for a later date, or because you simply haven't gotten to it yet.

Cancelled: Sometimes it becomes necessary to cancel an activity (for example, if a client unexpectedly can't make a meeting). "Cancelled" means the activity is no longer active, but it will still exist in your Method CRM.

Completed: When an activity comes to a successful conclusion (for example, you hang up the phone after your scheduled conference call) you can switch the activity's status to "Completed": it will no longer be active but it will still exist in your Method CRM.

Deferred: An activity that has been deferred is still considered active but has been put on hold.

In progress: An activity that takes some time to complete. It means the activity is in progress toward completion.

Waiting on someone else: An activity that is in progress but is waiting for input from another user, or a client, or someone else connected to the activity.
The ellipses button to the right of the drop down menu will open the New/Edit Activity Status screen, which you can learn more about in the screen overview below!
---
Activity priority types which can tell a user immediately what activities deserve their immediate attention, and which can be safely scheduled later. The stock priority types (high, medium, and low) are often enough for most businesses, but sometimes it can be helpful to create custom priority types to impart information specific to your business


*/

/*lead management status*/
CREATE TABLE contact_status(
	'status' int PRIMARY KEY,
	'description' varchar(20),
	'detail'  varchar(100)
};

INSERT INTO 'contact_status'(status, description, detail)
	 VALUES(1, "Not Attempted", "you haven’t tried to reach the lead"),
	 (2, "Attempted", "you have tried (person-to-person) to reach the lead"),
	 (3, "Contacted", "you have had a person-to-person dialog with the lead"),
	 (4, "New Opportunity", "new opportunity identified (convert lead)"),
	 (5, "Additional Contact", "new contact at existing opportunity (convert lead)"),
	 (6, "Disqualified", "never going to be a prospect for your product or service because this lead is the incorrect industry, company, contact or data");

CREATE TABLE task( 
	'task_id' INTEGER PRIMARY KEY,
	'task_name' varchar(60), 
	'due_date' Date NOT NULL,
	'description' varchar(200), 
	'status' varchar(20),
	'assignee' int, 
	'assigner' int, 
	'creator' int,
	CHECK( description IN ("Not Assigned", "Assigned", "Finished", "Revoked"))
);

CREATE TABLE task_status( 
	'status_id' int PRIMARY KEY,
	'description' varchar(20)
);

INSERT INTO 'task_status'(status_id, description) 
	VALUES( 1, "Not Assigned"),(2, "Assigned"), (3, "Finished"), (4, "Revoked");

CREATE TABLE 'product'( 
	'product_id' INTEGER PRIMARY KEY,
	'name' varchar(32),
	'price' decimal(6,2),
	'limit' int,
	'product_id' int,
	'active_for_sale' bool
);

CREATE TABLE 'order'( 
	'order_id' INTEGER PRIMARY KEY,
	'customer_id' int,
	'product_id' int,
	'order_amount' decimal(8,2),
	'date' date NOT NULL,
	'order_status' int
);

CREATE TABLE 'cookie'( 
	'session_id' char(36) PRIMARY KEY,
	'user_name' varchar(20),
	'password' varchar(32)
);

CREATE TABLE 'opportunity_pipeline'(
	'pipeline_id' INT PRIMARY KEY,
	'name'  varchar(20),
	'description' varchar(100));

INSERT INTO 'opportunity_pipeline'(pipeline_id, name, description) VALUES
(1, "Prospecting", "The first step in locating new opportunities, prospecting means \“testing the waters\” with a potential customer and measuring a level of interest."),
(2, "Qualification", " This involves evaluating the lead or customer based on a variety of criteria, including how interested they are, how likely they are to purchase, and how long the process might take."),
(3, "Needs Analysis", " Analyzing needs means determining what the need is in a target company and deciding whether or not your company can fulfill those needs using your product or service."),
(4, "Value Proposition", " This step involves understanding the relationship between the value of your product or service and the value it represents to a potential or current customer."),
(5, "Identify Decision Makers", " Identifying decision makers means determining who at a company is the person with the power to make purchasing decisions, and beginning to develop a relationship with them."),
(6, "Perception Analysis", " This stage involves determining how a customer perceives the services or products you offer; what they expect from your company and the product or service you offer."),
(7, "Proposal / Price Quote", " This happens later on in the pipeline - quoting a price and creating a proposal happens once the lead is interested enough to pursue this potential, but may want to confirm pricing and compare quotes with other companies."),
(8, "Negotiation / Review", " This stage happens towards the end of a pipeline; by the negotiation and review stage you should be hammering out the final details of the deal."),
(9, "Closed" , "either Closed Won or Closed Lost");

CREATE TABLE 'opportunity'(
	'opportunity' INTEGER PRIMARY KEY,
	'opportunity_name' varchar(50),
	'assign_to'  INT,
	'contact_id' INT,
	'creator_id' INT,
	'close_date' DATE,
	'pipeline' varchar(20),
	'amount' decimal(8,2),
	'probability' INT,
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(contact_id) REFERENCES contact(contact_id),
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	FOREIGN KEY(pipeline) REFERENCES opportunity_pipeline(pipeline_id),
	CHECK (pipeline IN ("Prospecting","Qualification", "Needs Analysis","Value Proposition","Identify Decision Makers","Perception Analysis","Proposal / Price Quote","Negotiation / Review", "Closed"))
 );

CREATE TABLE 'compaign_status'(
	'status_id' INTEGER,
	'status_name' varchar(20),
	'description'  varchar(50)
);
	
CREATE TABLE 'compaign'(
	'compaign_id' INTEGER PRIMARY KEY,
	'compaign_name' varchar(50),
	'assign_to'  INT,
	'status' varchar(20),
	'creator_id' INT,
	'start_date' DATE,
	'close_date' DATE,
	'description' varchar(100),
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(creator_id) REFERENCES employee(employee_id),
	CHECK (status IN ("XXX", "YYY" ))
);
	
CREATE TABLE 'case'(
	'case_id' INTEGER PRIMARY KEY,
	'assign_to' INT,
	'contactee' INT,
	'subject' varchar(100),
	'priority' char(10),
	'last_activity' DATE,
	'next_activity' DATE,
	FOREIGN KEY(assign_to) REFERENCES employee(employee_id),
	FOREIGN KEY(contactee) REFERENCES contact(contact_id),
 	CHECK( priority IN ("low", "medium", "high"))
);
/*
Case #: This number is automatically generated in an ascending order each time you create a case in Method. You can search and order the grid using these numbers.
Created date: The date a case was created.
Assigned to/Origin/Status: This three-part grid header will identify which Method user a case was assigned to, where the case originated, and the status of the case (see New case for more details on all of this).
Contact/Name/Company: This section will list the contact, name, and company associated with this case based in the information that was provided in the case information.
Subject: This will detail the subject line that was filled in when the case was created.
Priority: Priorities, much like in activities, can be set to three levels out-of-the-box in Method: low, medium, and high.
Internal comments: This will display any pertinent comments you have included regarding this case.
Last activity: This will identify the date the last activity was due to for this case.
Next activity: This will identify the date the next activity is due for this case.
*/
